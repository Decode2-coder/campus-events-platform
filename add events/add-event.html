<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Event</title>
    <link rel="stylesheet" href="index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
    <div class="form_wrapper">
      <div class="form_container">
        <div class="title_container">
          <h2>Add Event</h2>
        </div>
        <div class="row clearfix">
          <div class="">
            <form id="event-form">
              <label for="event-type" style="font-size: medium; font-weight: bold;">Event Type:</label>
              <select id="eventtype" name="event-type">
                <option value="academic">Academic</option>
                <option value="cultural">Cultural</option>
                <option value="sports">Sports</option>
                <option value="social">Social</option>
                <option value="technical">Technical</option>
              </select>
              <br /><br />
              <div class="input_field">
                <span><i class="fa-solid fa-signature"></i></span>
                <input
                  id="eventname"
                  type="text"
                  name="event-name"
                  placeholder="Event Name"
                  required
                />
              </div>
              <div class="input_field">
                <span><i class="fa-brands fa-cc-diners-club"></i></span>
                <input
                  id="committee"
                  type="text"
                  name="committee-name"
                  placeholder="Committee Name"
                  required
                />
              </div>
              <div class="input_field">
                <span><i class="fa-solid fa-location-dot"></i></span>
                <input id="venue" type="text" name="Venue" placeholder="Venue" required />
              </div>
              <div class="input_field">
                <span><i class="fa-solid fa-circle-info"></i></span>
                <input
                  id="description"
                  type="text"
                  width="100%"
                  name="Description"
                  placeholder="Description"
                />
              </div>
              <div class="input_field">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <input id="date" type="date" name="date" placeholder="date" required />
                <label style="font-size: medium; font-weight: bold;">Enter Event Date</label>
              </div>
              <div class="input_field">
                <i class="fa-solid fa-clock"></i>
                <input
                  id="time"
                  type="time"
                  name="password"
                  placeholder="Re-type Password"
                  required
                />
                <label for="event-time" style="font-size: medium; font-weight: bold;">Enter Event Time</label>
              </div>
              <div class="input_field">
                <input type="number" value="" id="capacity" required>
                <label for="capacity" style="font-size: medium; font-weight: bold;">Enter Capacity</label>
            </div>

              <!-- <div class="input_field checkbox_option">
                <input type="checkbox" id="cb1" />
                <label for="cb1">I agree with terms and conditions</label>
              </div> -->
              <input type="button" name="submit" id="submit" value="submit">
              
            </form>
          </div>
        </div>
      </div>
    </div>





      <!-- <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-app.js";
        import { getDatabase, ref, set, remove } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-database.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBqR7z2xgkSysRQf7rxIbkMo6LVPngFLSI",
            authDomain: "campus2-cb1c2.firebaseapp.com",
            databaseURL: "https://campus2-cb1c2-default-rtdb.firebaseio.com",
            projectId: "campus2-cb1c2",
            storageBucket: "campus2-cb1c2.appspot.com",
            messagingSenderId: "77436462606",
            appId: "1:77436462606:web:3acdf3f9c191d87ff5fe5f",
            measurementId: "G-XTVEBC5XCN"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth();
        let currentUser;

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                console.log(currentUser.email + " has logged in");
            } else {
                currentUser = null;
            }
        });

        document.getElementById("submit").addEventListener('click', function(e) {
            if (currentUser) {
                const eventKey = document.getElementById("eventname").value;
                set(ref(db, 'events/' + currentUser.uid + '/' + eventKey), {
                    id: eventKey + Date.now(),
                    owner: currentUser.uid,
                    eventtype: document.getElementById("eventtype").value,
                    name: document.getElementById("eventname").value,
                    committee: document.getElementById("committee").value,
                    venue: document.getElementById("venue").value,
                    description: document.getElementById("description").value,
                    Date: document.getElementById("date").value,
                    time: document.getElementById("time").value
                });
                alert('Data Saved');
                window.location.href = 'http://127.0.0.1:5500/Campus_Event_Management/admin.html'
            } else {
                alert('You are not authorized to add events.');
            }
        });
    </script> -->



    <script type="module">
      // Import the functions you need from the SDKs
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-app.js";
      import { getDatabase, ref, set, remove } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-database.js";
      import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-auth.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
          apiKey: "AIzaSyBqR7z2xgkSysRQf7rxIbkMo6LVPngFLSI",
          authDomain: "campus2-cb1c2.firebaseapp.com",
          databaseURL: "https://campus2-cb1c2-default-rtdb.firebaseio.com",
          projectId: "campus2-cb1c2",
          storageBucket: "campus2-cb1c2.appspot.com",
          messagingSenderId: "77436462606",
          appId: "1:77436462606:web:3acdf3f9c191d87ff5fe5f",
          measurementId: "G-XTVEBC5XCN"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const auth = getAuth();
      let currentUser;

      onAuthStateChanged(auth, (user) => {
          if (user) {
              currentUser = user;
              console.log(currentUser.email + " has logged in");
          } else {
              currentUser = null;
          }
      });

      document.getElementById("submit").addEventListener('click', function(e) {
      if (currentUser) {
          const eventKey = document.getElementById("eventname").value;
          const capacity = parseInt(document.getElementById("capacity").value); // Parse the capacity as an integer

          set(ref(db, 'events/' + currentUser.uid + '/' + eventKey), {
              id: eventKey + Date.now(),
              owner: currentUser.uid,
              eventtype: document.getElementById("eventtype").value,
              name: document.getElementById("eventname").value,
              committee: document.getElementById("committee").value,
              venue: document.getElementById("venue").value,
              description: document.getElementById("description").value,
              Date: document.getElementById("date").value,
              time: document.getElementById("time").value,
              capacity: capacity // Store the capacity
          });

          alert('Data Saved');
          } else {
            alert('You are not authorized to add events.');
          }
        });
      </script>
  </body>

</html>



